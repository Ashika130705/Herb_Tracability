{"ast":null,"code":"import _objectSpread from\"C:/Users/DELL/herb-traceability/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from\"react\";import{QRCodeSVG}from\"qrcode.react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AdminDashboard(){// Dummy herb data with \"status\"\nconst[herbs,setHerbs]=useState([{id:1,name:\"Tulsi\",farmer:\"Ramesh\",lat:12.9255,lng:74.8407,status:\"pending\"},{id:2,name:\"Ashwagandha\",farmer:\"Sita\",lat:13.0123,lng:77.5544,status:\"pending\"},{id:3,name:\"Neem\",farmer:\"Kiran\",lat:12.8765,lng:74.6543,status:\"pending\"}]);// Approve function\nconst approveHerb=id=>{setHerbs(herbs.map(herb=>herb.id===id?_objectSpread(_objectSpread({},herb),{},{status:\"approved\"}):herb));};// Reject function\nconst rejectHerb=id=>{setHerbs(herbs.map(herb=>herb.id===id?_objectSpread(_objectSpread({},herb),{},{status:\"rejected\"}):herb));};// Function to download QR as PNG\nconst downloadQR=herb=>{const svg=document.getElementById(\"qr-\".concat(herb.id));if(!svg)return;const serializer=new XMLSerializer();const svgData=serializer.serializeToString(svg);const canvas=document.createElement(\"canvas\");const ctx=canvas.getContext(\"2d\");const img=new Image();img.onload=function(){canvas.width=img.width;canvas.height=img.height;ctx.drawImage(img,0,0);const pngFile=canvas.toDataURL(\"image/png\");const downloadLink=document.createElement(\"a\");downloadLink.download=\"\".concat(herb.name,\"-qr.png\");downloadLink.href=pngFile;downloadLink.click();};img.src=\"data:image/svg+xml;base64,\"+btoa(unescape(encodeURIComponent(svgData)));};return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h2\",{style:{marginTop:0},children:\"\\uD83C\\uDF3F Admin Dashboard\"}),/*#__PURE__*/_jsx(\"div\",{className:\"card\",style:{padding:0,overflowX:'auto'},children:/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'collapse'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{background:'#f1f5f9'},children:[/*#__PURE__*/_jsx(\"th\",{style:th,children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{style:th,children:\"Herb Name\"}),/*#__PURE__*/_jsx(\"th\",{style:th,children:\"Farmer\"}),/*#__PURE__*/_jsx(\"th\",{style:th,children:\"Location\"}),/*#__PURE__*/_jsx(\"th\",{style:th,children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{style:th,children:\"QR Code\"}),/*#__PURE__*/_jsx(\"th\",{style:th,children:\"Download\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:herbs.map(herb=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:td,children:herb.id}),/*#__PURE__*/_jsx(\"td\",{style:td,children:herb.name}),/*#__PURE__*/_jsx(\"td\",{style:td,children:herb.farmer}),/*#__PURE__*/_jsxs(\"td\",{style:td,children:[herb.lat,\", \",herb.lng]}),/*#__PURE__*/_jsx(\"td\",{style:td,children:herb.status==='approved'?/*#__PURE__*/_jsx(\"span\",{style:{color:'#16a34a',fontWeight:700},children:\"Approved \\u2705\"}):herb.status==='rejected'?/*#__PURE__*/_jsx(\"span\",{style:{color:'#dc2626',fontWeight:700},children:\"Rejected \\u274C\"}):/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8,justifyContent:'center'},children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>approveHerb(herb.id),children:\"Approve\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-ghost\",onClick:()=>rejectHerb(herb.id),children:\"Reject\"})]})}),/*#__PURE__*/_jsx(\"td\",{style:td,children:herb.status==='approved'&&/*#__PURE__*/_jsx(QRCodeSVG,{id:\"qr-\".concat(herb.id),value:JSON.stringify(herb),size:80})}),/*#__PURE__*/_jsx(\"td\",{style:td,children:herb.status==='approved'&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>downloadQR(herb),children:\"Download QR\"})})]},herb.id))})]})})]});}const th={textAlign:'left',padding:'10px 12px',borderBottom:'1px solid #e2e8f0'};const td={textAlign:'left',padding:'10px 12px',borderBottom:'1px solid #e2e8f0'};export default AdminDashboard;","map":{"version":3,"names":["React","useState","QRCodeSVG","jsx","_jsx","jsxs","_jsxs","AdminDashboard","herbs","setHerbs","id","name","farmer","lat","lng","status","approveHerb","map","herb","_objectSpread","rejectHerb","downloadQR","svg","document","getElementById","concat","serializer","XMLSerializer","svgData","serializeToString","canvas","createElement","ctx","getContext","img","Image","onload","width","height","drawImage","pngFile","toDataURL","downloadLink","download","href","click","src","btoa","unescape","encodeURIComponent","className","children","style","marginTop","padding","overflowX","borderCollapse","background","th","td","color","fontWeight","display","gap","justifyContent","onClick","value","JSON","stringify","size","textAlign","borderBottom"],"sources":["C:/Users/DELL/herb-traceability/src/pages/AdminDashboard.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { QRCodeSVG } from \"qrcode.react\";\r\n\r\nfunction AdminDashboard() {\r\n  // Dummy herb data with \"status\"\r\n  const [herbs, setHerbs] = useState([\r\n    { id: 1, name: \"Tulsi\", farmer: \"Ramesh\", lat: 12.9255, lng: 74.8407, status: \"pending\" },\r\n    { id: 2, name: \"Ashwagandha\", farmer: \"Sita\", lat: 13.0123, lng: 77.5544, status: \"pending\" },\r\n    { id: 3, name: \"Neem\", farmer: \"Kiran\", lat: 12.8765, lng: 74.6543, status: \"pending\" },\r\n  ]);\r\n\r\n  // Approve function\r\n  const approveHerb = (id) => {\r\n    setHerbs(\r\n      herbs.map((herb) =>\r\n        herb.id === id ? { ...herb, status: \"approved\" } : herb\r\n      )\r\n    );\r\n  };\r\n\r\n  // Reject function\r\n  const rejectHerb = (id) => {\r\n    setHerbs(\r\n      herbs.map((herb) =>\r\n        herb.id === id ? { ...herb, status: \"rejected\" } : herb\r\n      )\r\n    );\r\n  };\r\n\r\n  // Function to download QR as PNG\r\n  const downloadQR = (herb) => {\r\n    const svg = document.getElementById(`qr-${herb.id}`);\r\n    if (!svg) return;\r\n\r\n    const serializer = new XMLSerializer();\r\n    const svgData = serializer.serializeToString(svg);\r\n\r\n    const canvas = document.createElement(\"canvas\");\r\n    const ctx = canvas.getContext(\"2d\");\r\n\r\n    const img = new Image();\r\n    img.onload = function () {\r\n      canvas.width = img.width;\r\n      canvas.height = img.height;\r\n      ctx.drawImage(img, 0, 0);\r\n\r\n      const pngFile = canvas.toDataURL(\"image/png\");\r\n      const downloadLink = document.createElement(\"a\");\r\n      downloadLink.download = `${herb.name}-qr.png`;\r\n      downloadLink.href = pngFile;\r\n      downloadLink.click();\r\n    };\r\n\r\n    img.src =\r\n      \"data:image/svg+xml;base64,\" +\r\n      btoa(unescape(encodeURIComponent(svgData)));\r\n  };\r\n\r\n  return (\r\n    <div className=\"card\">\r\n      <h2 style={{ marginTop: 0 }}>üåø Admin Dashboard</h2>\r\n      <div className=\"card\" style={{ padding: 0, overflowX: 'auto' }}>\r\n        <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n          <thead>\r\n            <tr style={{ background: '#f1f5f9' }}>\r\n              <th style={th}>ID</th>\r\n              <th style={th}>Herb Name</th>\r\n              <th style={th}>Farmer</th>\r\n              <th style={th}>Location</th>\r\n              <th style={th}>Status</th>\r\n              <th style={th}>QR Code</th>\r\n              <th style={th}>Download</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {herbs.map((herb) => (\r\n              <tr key={herb.id}>\r\n                <td style={td}>{herb.id}</td>\r\n                <td style={td}>{herb.name}</td>\r\n                <td style={td}>{herb.farmer}</td>\r\n                <td style={td}>{herb.lat}, {herb.lng}</td>\r\n                <td style={td}>\r\n                  {herb.status === 'approved' ? (\r\n                    <span style={{ color: '#16a34a', fontWeight: 700 }}>Approved ‚úÖ</span>\r\n                  ) : herb.status === 'rejected' ? (\r\n                    <span style={{ color: '#dc2626', fontWeight: 700 }}>Rejected ‚ùå</span>\r\n                  ) : (\r\n                    <div style={{ display: 'flex', gap: 8, justifyContent: 'center' }}>\r\n                      <button className=\"btn btn-secondary\" onClick={() => approveHerb(herb.id)}>Approve</button>\r\n                      <button className=\"btn btn-ghost\" onClick={() => rejectHerb(herb.id)}>Reject</button>\r\n                    </div>\r\n                  )}\r\n                </td>\r\n                <td style={td}>\r\n                  {herb.status === 'approved' && (\r\n                    <QRCodeSVG id={`qr-${herb.id}`} value={JSON.stringify(herb)} size={80} />\r\n                  )}\r\n                </td>\r\n                <td style={td}>\r\n                  {herb.status === 'approved' && (\r\n                    <button className=\"btn btn-primary\" onClick={() => downloadQR(herb)}>Download QR</button>\r\n                  )}\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst th = { textAlign: 'left', padding: '10px 12px', borderBottom: '1px solid #e2e8f0' };\r\nconst td = { textAlign: 'left', padding: '10px 12px', borderBottom: '1px solid #e2e8f0' };\r\n\r\nexport default AdminDashboard;"],"mappings":"oHAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,SAAS,KAAQ,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEzC,QAAS,CAAAC,cAAcA,CAAA,CAAG,CACxB;AACA,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGR,QAAQ,CAAC,CACjC,CAAES,EAAE,CAAE,CAAC,CAAEC,IAAI,CAAE,OAAO,CAAEC,MAAM,CAAE,QAAQ,CAAEC,GAAG,CAAE,OAAO,CAAEC,GAAG,CAAE,OAAO,CAAEC,MAAM,CAAE,SAAU,CAAC,CACzF,CAAEL,EAAE,CAAE,CAAC,CAAEC,IAAI,CAAE,aAAa,CAAEC,MAAM,CAAE,MAAM,CAAEC,GAAG,CAAE,OAAO,CAAEC,GAAG,CAAE,OAAO,CAAEC,MAAM,CAAE,SAAU,CAAC,CAC7F,CAAEL,EAAE,CAAE,CAAC,CAAEC,IAAI,CAAE,MAAM,CAAEC,MAAM,CAAE,OAAO,CAAEC,GAAG,CAAE,OAAO,CAAEC,GAAG,CAAE,OAAO,CAAEC,MAAM,CAAE,SAAU,CAAC,CACxF,CAAC,CAEF;AACA,KAAM,CAAAC,WAAW,CAAIN,EAAE,EAAK,CAC1BD,QAAQ,CACND,KAAK,CAACS,GAAG,CAAEC,IAAI,EACbA,IAAI,CAACR,EAAE,GAAKA,EAAE,CAAAS,aAAA,CAAAA,aAAA,IAAQD,IAAI,MAAEH,MAAM,CAAE,UAAU,GAAKG,IACrD,CACF,CAAC,CACH,CAAC,CAED;AACA,KAAM,CAAAE,UAAU,CAAIV,EAAE,EAAK,CACzBD,QAAQ,CACND,KAAK,CAACS,GAAG,CAAEC,IAAI,EACbA,IAAI,CAACR,EAAE,GAAKA,EAAE,CAAAS,aAAA,CAAAA,aAAA,IAAQD,IAAI,MAAEH,MAAM,CAAE,UAAU,GAAKG,IACrD,CACF,CAAC,CACH,CAAC,CAED;AACA,KAAM,CAAAG,UAAU,CAAIH,IAAI,EAAK,CAC3B,KAAM,CAAAI,GAAG,CAAGC,QAAQ,CAACC,cAAc,OAAAC,MAAA,CAAOP,IAAI,CAACR,EAAE,CAAE,CAAC,CACpD,GAAI,CAACY,GAAG,CAAE,OAEV,KAAM,CAAAI,UAAU,CAAG,GAAI,CAAAC,aAAa,CAAC,CAAC,CACtC,KAAM,CAAAC,OAAO,CAAGF,UAAU,CAACG,iBAAiB,CAACP,GAAG,CAAC,CAEjD,KAAM,CAAAQ,MAAM,CAAGP,QAAQ,CAACQ,aAAa,CAAC,QAAQ,CAAC,CAC/C,KAAM,CAAAC,GAAG,CAAGF,MAAM,CAACG,UAAU,CAAC,IAAI,CAAC,CAEnC,KAAM,CAAAC,GAAG,CAAG,GAAI,CAAAC,KAAK,CAAC,CAAC,CACvBD,GAAG,CAACE,MAAM,CAAG,UAAY,CACvBN,MAAM,CAACO,KAAK,CAAGH,GAAG,CAACG,KAAK,CACxBP,MAAM,CAACQ,MAAM,CAAGJ,GAAG,CAACI,MAAM,CAC1BN,GAAG,CAACO,SAAS,CAACL,GAAG,CAAE,CAAC,CAAE,CAAC,CAAC,CAExB,KAAM,CAAAM,OAAO,CAAGV,MAAM,CAACW,SAAS,CAAC,WAAW,CAAC,CAC7C,KAAM,CAAAC,YAAY,CAAGnB,QAAQ,CAACQ,aAAa,CAAC,GAAG,CAAC,CAChDW,YAAY,CAACC,QAAQ,IAAAlB,MAAA,CAAMP,IAAI,CAACP,IAAI,WAAS,CAC7C+B,YAAY,CAACE,IAAI,CAAGJ,OAAO,CAC3BE,YAAY,CAACG,KAAK,CAAC,CAAC,CACtB,CAAC,CAEDX,GAAG,CAACY,GAAG,CACL,4BAA4B,CAC5BC,IAAI,CAACC,QAAQ,CAACC,kBAAkB,CAACrB,OAAO,CAAC,CAAC,CAAC,CAC/C,CAAC,CAED,mBACEtB,KAAA,QAAK4C,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnB/C,IAAA,OAAIgD,KAAK,CAAE,CAAEC,SAAS,CAAE,CAAE,CAAE,CAAAF,QAAA,CAAC,8BAAkB,CAAI,CAAC,cACpD/C,IAAA,QAAK8C,SAAS,CAAC,MAAM,CAACE,KAAK,CAAE,CAAEE,OAAO,CAAE,CAAC,CAAEC,SAAS,CAAE,MAAO,CAAE,CAAAJ,QAAA,cAC7D7C,KAAA,UAAO8C,KAAK,CAAE,CAAEf,KAAK,CAAE,MAAM,CAAEmB,cAAc,CAAE,UAAW,CAAE,CAAAL,QAAA,eAC1D/C,IAAA,UAAA+C,QAAA,cACE7C,KAAA,OAAI8C,KAAK,CAAE,CAAEK,UAAU,CAAE,SAAU,CAAE,CAAAN,QAAA,eACnC/C,IAAA,OAAIgD,KAAK,CAAEM,EAAG,CAAAP,QAAA,CAAC,IAAE,CAAI,CAAC,cACtB/C,IAAA,OAAIgD,KAAK,CAAEM,EAAG,CAAAP,QAAA,CAAC,WAAS,CAAI,CAAC,cAC7B/C,IAAA,OAAIgD,KAAK,CAAEM,EAAG,CAAAP,QAAA,CAAC,QAAM,CAAI,CAAC,cAC1B/C,IAAA,OAAIgD,KAAK,CAAEM,EAAG,CAAAP,QAAA,CAAC,UAAQ,CAAI,CAAC,cAC5B/C,IAAA,OAAIgD,KAAK,CAAEM,EAAG,CAAAP,QAAA,CAAC,QAAM,CAAI,CAAC,cAC1B/C,IAAA,OAAIgD,KAAK,CAAEM,EAAG,CAAAP,QAAA,CAAC,SAAO,CAAI,CAAC,cAC3B/C,IAAA,OAAIgD,KAAK,CAAEM,EAAG,CAAAP,QAAA,CAAC,UAAQ,CAAI,CAAC,EAC1B,CAAC,CACA,CAAC,cACR/C,IAAA,UAAA+C,QAAA,CACG3C,KAAK,CAACS,GAAG,CAAEC,IAAI,eACdZ,KAAA,OAAA6C,QAAA,eACE/C,IAAA,OAAIgD,KAAK,CAAEO,EAAG,CAAAR,QAAA,CAAEjC,IAAI,CAACR,EAAE,CAAK,CAAC,cAC7BN,IAAA,OAAIgD,KAAK,CAAEO,EAAG,CAAAR,QAAA,CAAEjC,IAAI,CAACP,IAAI,CAAK,CAAC,cAC/BP,IAAA,OAAIgD,KAAK,CAAEO,EAAG,CAAAR,QAAA,CAAEjC,IAAI,CAACN,MAAM,CAAK,CAAC,cACjCN,KAAA,OAAI8C,KAAK,CAAEO,EAAG,CAAAR,QAAA,EAAEjC,IAAI,CAACL,GAAG,CAAC,IAAE,CAACK,IAAI,CAACJ,GAAG,EAAK,CAAC,cAC1CV,IAAA,OAAIgD,KAAK,CAAEO,EAAG,CAAAR,QAAA,CACXjC,IAAI,CAACH,MAAM,GAAK,UAAU,cACzBX,IAAA,SAAMgD,KAAK,CAAE,CAAEQ,KAAK,CAAE,SAAS,CAAEC,UAAU,CAAE,GAAI,CAAE,CAAAV,QAAA,CAAC,iBAAU,CAAM,CAAC,CACnEjC,IAAI,CAACH,MAAM,GAAK,UAAU,cAC5BX,IAAA,SAAMgD,KAAK,CAAE,CAAEQ,KAAK,CAAE,SAAS,CAAEC,UAAU,CAAE,GAAI,CAAE,CAAAV,QAAA,CAAC,iBAAU,CAAM,CAAC,cAErE7C,KAAA,QAAK8C,KAAK,CAAE,CAAEU,OAAO,CAAE,MAAM,CAAEC,GAAG,CAAE,CAAC,CAAEC,cAAc,CAAE,QAAS,CAAE,CAAAb,QAAA,eAChE/C,IAAA,WAAQ8C,SAAS,CAAC,mBAAmB,CAACe,OAAO,CAAEA,CAAA,GAAMjD,WAAW,CAACE,IAAI,CAACR,EAAE,CAAE,CAAAyC,QAAA,CAAC,SAAO,CAAQ,CAAC,cAC3F/C,IAAA,WAAQ8C,SAAS,CAAC,eAAe,CAACe,OAAO,CAAEA,CAAA,GAAM7C,UAAU,CAACF,IAAI,CAACR,EAAE,CAAE,CAAAyC,QAAA,CAAC,QAAM,CAAQ,CAAC,EAClF,CACN,CACC,CAAC,cACL/C,IAAA,OAAIgD,KAAK,CAAEO,EAAG,CAAAR,QAAA,CACXjC,IAAI,CAACH,MAAM,GAAK,UAAU,eACzBX,IAAA,CAACF,SAAS,EAACQ,EAAE,OAAAe,MAAA,CAAQP,IAAI,CAACR,EAAE,CAAG,CAACwD,KAAK,CAAEC,IAAI,CAACC,SAAS,CAAClD,IAAI,CAAE,CAACmD,IAAI,CAAE,EAAG,CAAE,CACzE,CACC,CAAC,cACLjE,IAAA,OAAIgD,KAAK,CAAEO,EAAG,CAAAR,QAAA,CACXjC,IAAI,CAACH,MAAM,GAAK,UAAU,eACzBX,IAAA,WAAQ8C,SAAS,CAAC,iBAAiB,CAACe,OAAO,CAAEA,CAAA,GAAM5C,UAAU,CAACH,IAAI,CAAE,CAAAiC,QAAA,CAAC,aAAW,CAAQ,CACzF,CACC,CAAC,GA1BEjC,IAAI,CAACR,EA2BV,CACL,CAAC,CACG,CAAC,EACH,CAAC,CACL,CAAC,EACH,CAAC,CAEV,CAEA,KAAM,CAAAgD,EAAE,CAAG,CAAEY,SAAS,CAAE,MAAM,CAAEhB,OAAO,CAAE,WAAW,CAAEiB,YAAY,CAAE,mBAAoB,CAAC,CACzF,KAAM,CAAAZ,EAAE,CAAG,CAAEW,SAAS,CAAE,MAAM,CAAEhB,OAAO,CAAE,WAAW,CAAEiB,YAAY,CAAE,mBAAoB,CAAC,CAEzF,cAAe,CAAAhE,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}